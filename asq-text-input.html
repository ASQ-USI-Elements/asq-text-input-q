<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../asq-element-common/asq-element-common.html">

<polymer-element name="asq-text-input" attributes="type value placeholder">
  <template>
    <div class="asq-text-input">
      <label for="input"><content></content></label>
      <input type="{{type}}" name="input" value="{{value}}" placeholder="{{placeholder}}">
    </div>
  </template>

  <script>
    (function() {
    
      var p = {

        correctAnswer: "",


        answer: "",

        created: function  () {
          if ( this.attributes.hasOwnProperty("correctAnswer") ) {
            this.answer = this.attributes["correctAnswer"].value;
            this.removeAttribute("correctanswer");
            // this.attributes["correctanswer"].value = "heh";
          } 
        },

        submit: function() {
          if ( this.role !== this.Roles.VIEWER ) {
            return;
          }

          if ( typeof this.value == 'undefined' ) {
            this.value = "";
          }

          submission = this.value.replace(/[\s]+/g, " ").trim();
          
          return {
            questionId: "",
            timestamp: new Date(),
            submission: submission
          };
        }
      
      }
      ASQ.mixin2(p, ASQ.RoleMixin);
      Polymer.mixin(p, ASQ.ElementTypeMixin, ASQ.QuestionTypeMixin);
      Polymer('asq-text-input', p);
    })();
  </script>
</polymer-element>