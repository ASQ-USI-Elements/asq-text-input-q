<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../asq-base/asq-base.html">


<!--
`asq-text-input` is a styled single-line input field. It wraps the `paper-input` element.

##### Example
    <asq-text-input label="input here">An asq input element</asq-text-input>


@element asq-text-input
@group ASQ Elements
@blurb Element a styled single-line input field. It wraps the `paper-input` element.
@homepage http://github.com/ASQ_USI/asq-option
-->
<polymer-element name="asq-text-input" attributes="value label floatingLabel">

  <template>
    <style>
      ::content asq-solution {display: none};
    </style>
    <div class="asq-text-input">
      <content></content>
      <paper-input label="{{label}}" floatingLabel="{{floatingLabel}}" value="{{value}}"></paper-input>
    </div>
  </template>

  <script>
    (function() {
    
      var p = {
        /**
         * FROM POLYMER DOCUMENTATION
         * The label for this input. It normally appears as grey text inside
         * the text input and disappears once the user enters text.
         *
         * @attribute label
         * @type string
         * @default ''
         */
        label: '',

        // Overwrite defalut value for all instances of `asq-text-input`, which are question type.
        isASQQuestionTypeElement : true, 

        // correctAnswer: "",

        // answer: "",

        created: function  () {
          // if ( this.attributes.hasOwnProperty("correctAnswer") ) {
          //   this.answer = this.attributes["correctAnswer"].value;
          //   this.removeAttribute("correctanswer");
          //   // this.attributes["correctanswer"].value = "heh";
          // } 
        },

        /**
         * The `submit` method will submit the answer to a wrapped 'asq-exercise' instance.
         * Only useful when the `role` is `viewer`.
         * 
         * @method submit
         */
        submit: function() {
          if ( this.role !== this.roles.VIEWER ) {
            return;
          }

          if ( typeof this.value == 'undefined' ) {
            this.value = "";
          }

          submission = this.value.replace(/[\s]+/g, " ").trim();
          
          return {
            questionId: "",
            timestamp: new Date(),
            submission: submission
          };
        }
      
      }

      ASQ.asqify(p, true);
      Polymer('asq-text-input', p);
    })();
  </script>
</polymer-element>